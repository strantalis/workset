	.app-shell {
		height: 100vh;
		display: grid;
		grid-template-columns: 96px 1fr;
		overflow: hidden;
		background: transparent;
		position: relative;
	}

	.app-shell.popout {
		grid-template-columns: 96px 1fr;
	}

	.rail {
		--rail-top-clearance: 52px;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 14px;
		padding: 22px 10px;
		padding-top: var(--rail-top-clearance);
		padding-left: 14px;
		background: color-mix(in srgb, var(--panel) 72%, transparent);
		backdrop-filter: blur(14px);
		position: relative;
		z-index: 10;
		border-right: 1px solid color-mix(in srgb, var(--border) 78%, white);
	}

	.rail button,
	.rail nav {
		-webkit-app-region: no-drag;
	}

	.hub-btn,
	.rail-item {
		position: relative;
		width: 42px;
		height: 42px;
		border-radius: 12px;
		border: 1px solid transparent;
		background: transparent;
		color: var(--muted);
		cursor: pointer;
		display: grid;
		place-items: center;
		transition:
			color var(--transition-fast),
			background var(--transition-fast),
			border-color var(--transition-fast),
			transform var(--transition-fast);
	}

	.hub-btn {
		color: white;
		background: color-mix(in srgb, var(--accent) 55%, var(--panel-strong));
		border-color: color-mix(in srgb, var(--accent) 52%, var(--border));
		box-shadow: 0 0 20px color-mix(in srgb, var(--accent) 30%, transparent);
		padding: 0;
		overflow: visible;
	}

	.hub-btn.active {
		transform: translateY(-1px);
	}

	.hub-btn img {
		width: 42px;
		height: 42px;
		object-fit: cover;
		border-radius: inherit;
	}

	.rail [data-tooltip]::after {
		content: attr(data-tooltip);
		position: absolute;
		left: calc(100% + 12px);
		top: 50%;
		transform: translateY(-50%) translateX(-4px);
		opacity: 0;
		pointer-events: none;
		white-space: nowrap;
		padding: 6px 9px;
		border-radius: 8px;
		border: 1px solid color-mix(in srgb, var(--border) 85%, white);
		background: color-mix(in srgb, var(--panel-strong) 90%, black);
		color: var(--text);
		font-size: var(--text-xs);
		font-weight: 600;
		letter-spacing: 0.01em;
		box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
		transition:
			opacity var(--transition-fast),
			transform var(--transition-fast);
		z-index: 10001;
	}

	.rail [data-tooltip]:hover::after,
	.rail [data-tooltip]:focus-visible::after {
		opacity: 1;
		transform: translateY(-50%) translateX(0);
	}

	.rail-nav {
		display: flex;
		flex-direction: column;
		gap: 10px;
		margin-top: 8px;
	}

	.rail-divider {
		width: 32px;
		height: 1px;
		background: #2a3a4e;
		margin: 2px 0;
	}

	.rail-item:hover {
		color: var(--text);
		background: color-mix(in srgb, var(--panel-strong) 72%, transparent);
		border-color: color-mix(in srgb, var(--accent) 34%, var(--border));
	}

	.rail-item.active {
		color: var(--text);
		background: color-mix(in srgb, var(--accent) 16%, var(--panel-strong));
		border-color: color-mix(in srgb, var(--accent) 56%, var(--border));
	}

	.rail-item.active::before {
		content: '';
		position: absolute;
		left: -11px;
		top: 50%;
		transform: translateY(-50%);
		width: 4px;
		height: 20px;
		border-radius: 0 4px 4px 0;
		background: var(--accent);
	}

	.settings {
		margin-top: auto;
	}

	.popout-rail .rail-nav {
		margin-top: 0;
	}

	.popout-return-rail {
		margin-top: auto;
	}

	.shell-main {
		display: flex;
		flex-direction: column;
		min-height: 0;
		background: transparent;
	}

	.view-shell {
		flex: 1;
		min-height: 0;
		overflow: hidden;
		background: transparent;
	}

	.view-transition {
		height: 100%;
	}

	.error {
		margin: 24px;
		background: color-mix(in srgb, var(--panel) 88%, transparent);
		border: 1px solid var(--border);
		border-radius: 16px;
		padding: 24px;
		display: grid;
		gap: 12px;
	}

	.error .title {
		font-size: var(--text-xl);
		font-weight: 600;
	}

	.error .body {
		color: var(--muted);
		font-size: var(--text-md);
	}

	.retry {
		justify-self: start;
		background: var(--accent);
		border: none;
		color: #081018;
		padding: 8px 12px;
		border-radius: var(--radius-md);
		font-weight: 600;
		cursor: pointer;
	}

	.overlay {
		position: fixed;
		inset: 0;
		background: rgba(6, 9, 14, 0.85);
		backdrop-filter: blur(2px);
		display: grid;
		place-items: center;
		z-index: 200;
		padding: 24px;
		animation: overlayFadeIn var(--transition-normal) ease-out;
	}

	.overlay-panel {
		width: 100%;
		display: flex;
		justify-content: center;
		animation: modalSlideIn 200ms ease-out;
	}

	@keyframes overlayFadeIn {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	@keyframes modalSlideIn {
		from {
			opacity: 0;
			transform: translateY(-8px) scale(0.98);
		}
		to {
			opacity: 1;
			transform: translateY(0) scale(1);
		}
	}

	@media (max-width: 860px) {
		.app-shell {
			grid-template-columns: 80px 1fr;
		}

		.rail {
			--rail-top-clearance: 48px;
			padding-left: 8px;
			padding-right: 8px;
		}

		.rail [data-tooltip]::after {
			display: none;
		}
	}
